(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70270882","chunk-2d0d36d3"],{3547:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-login"},[s("div",{staticClass:"page-login--layer page-login--layer-area"},[s("ul",{staticClass:"circles"},e._l(10,(function(e){return s("li",{key:e})})),0)]),s("div",{staticClass:"page-login--layer page-login--layer-time",attrs:{flex:"main:center cross:center"}},[e._v(" "+e._s(e.time)+" ")]),s("div",{staticClass:"page-login--layer"},[s("div",{staticClass:"page-login--content",attrs:{flex:"dir:top main:justify cross:stretch box:justify"}},[s("div",{staticClass:"page-login--content-header"}),s("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center"}},[s("h1",[e._v("校园综合安防系统")]),s("div",{staticClass:"page-login--form"},[s("el-card",{attrs:{shadow:"never"}},[s("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.formLogin,size:"default"}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[s("i",{staticClass:"fa fa-user-circle-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[s("i",{staticClass:"fa fa-keyboard-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),s("el-form-item",{attrs:{prop:"code"}},[s("el-input",{attrs:{type:"text",placeholder:"验证码"},model:{value:e.formLogin.code,callback:function(t){e.$set(e.formLogin,"code",t)},expression:"formLogin.code"}},[s("template",{slot:"append"},[s("img",{staticClass:"login-code",attrs:{src:r("5d5c")}})])],2)],1),s("el-button",{staticClass:"button-login",attrs:{size:"default",type:"primary"},on:{click:e.submit}},[e._v(" 登录 ")])],1)],1),s("p",{staticClass:"page-login--options",attrs:{flex:"main:justify cross:center"}},[s("el-button",{staticClass:"page-login--quick",attrs:{size:"default",type:"warning"}},[e._v(" 忘记密码 ")]),s("el-button",{staticClass:"page-login--quick",attrs:{size:"default",type:"success"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 立即注册 ")])],1)],1)]),s("div",{staticClass:"page-login--content-footer"},[s("p",{staticClass:"page-login--content-footer-locales"},e._l(e.$languages,(function(t){return s("a",{key:t.value,on:{click:function(r){return e.onChangeLocale(t.value)}}},[e._v(" "+e._s(t.label)+" ")])})),0)])])]),s("el-dialog",{attrs:{title:"注册",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"form",attrs:{"status-icon":"",rules:e.registerRules,model:e.newUser,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.newUser.userName,callback:function(t){e.$set(e.newUser,"userName",t)},expression:"newUser.userName"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:e.newUser.password,callback:function(t){e.$set(e.newUser,"password",t)},expression:"newUser.password"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"checkedPassword"}},[s("el-input",{attrs:{"show-password":"",placeholder:"请确认密码"},model:{value:e.newUser.checkedPassword,callback:function(t){e.$set(e.newUser,"checkedPassword",t)},expression:"newUser.checkedPassword"}})],1),s("el-form-item",{attrs:{label:"角色",prop:"role"}},[s("el-radio-group",{model:{value:e.newUser.role,callback:function(t){e.$set(e.newUser,"role",t)},expression:"newUser.role"}},[s("el-radio-button",{attrs:{label:"1"}},[e._v("学生")]),s("el-radio-button",{attrs:{label:"2"}},[e._v("教师")]),s("el-radio-button",{attrs:{label:"3"}},[e._v("职工")])],1)],1),s("el-button",{staticStyle:{width:"60%","margin-left":"21%"},attrs:{size:"default",type:"success"},on:{click:function(t){return e.registerSubmit()}}},[e._v(" 注册 ")])],1)],1)],1)},o=[],a=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),n=r("5a0c"),i=r.n(n),l=r("2f62"),c=r("1353"),u=r("99c7"),d=r("c276");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={mixins:[c["a"]],data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.newUser.checkedPassword&&e.$refs.Form.validateField("checkedPassword"),s())},r=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.newUser.password?s(new Error("两次输入密码不一致!")):s()};return{timeInterval:null,time:i()().format("HH:mm:ss"),dialogVisible:!1,newUser:{userName:"",password:"",checkedPassword:"",role:""},formLogin:{username:"caidawei",password:"123456",code:"123"},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},registerRules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{validator:t,trigger:"blur"}],checkedPassword:[{validator:r,trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]}}},mounted:function(){var e=this;this.timeInterval=setInterval((function(){e.refreshTime()}),1e3)},beforeDestroy:function(){clearInterval(this.timeInterval)},methods:f({},Object(l["b"])("d2admin/account",["login"]),{refreshTime:function(){this.time=i()().format("HH:mm:ss")},registerSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(u["register"])({userName:e.newUser.userName,password:e.newUser.password,role:e.newUser.role})}))},submit:function(){var e=this;this.$refs.loginForm.validate((function(t){t?Object(u["accountLogin"])({username:e.formLogin.username,password:e.formLogin.password}).then((function(t){!0===t?(d["a"].cookies.set("uuid","admin-user"),d["a"].cookies.set("token","asdfasdfasdfasdfasdf"),e.$router.push({name:"index"})):e.$message.error("登录失败,用户名或密码错误")})):e.$message.error("表单校验失败，请检查")}))}})},g=m,b=(r("60d0"),r("2877")),w=function(e){e.options.__source="src/views/system/login/page.vue"},v=w,h=Object(b["a"])(g,s,o,!1,null,null,null);"function"===typeof v&&v(h);t["default"]=h.exports},"4d33":function(e,t,r){},"5d5c":function(e,t,r){e.exports=r.p+"img/login-code.10fef840.png"},"60d0":function(e,t,r){"use strict";var s=r("4d33"),o=r.n(s);o.a},"99c7":function(e,t,r){"use strict";r.r(t),r.d(t,"register",(function(){return a})),r.d(t,"accountLogin",(function(){return n}));var s=r("3547"),o=r("9bd2");function a(e){return Object(o["a"])({url:"/User/register",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/User/login",method:"post",data:e})}t["default"]=s["default"]}}]);